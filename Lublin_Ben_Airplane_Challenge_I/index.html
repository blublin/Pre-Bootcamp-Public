<!--
Coding Dojo Pre-bootcamp
March 14, 2022
Ben Lublin

Airplane Challenge I
All bonus challenges met:
* Added movement (4 directions)
* Added enemies (6 on screen with scalability for more or less)
* Changed background, enemy and player vehicle
* Modified player movement to bottom 1/4 of the game area
-->

<!DOCTYPE html>
<html>
<head>
	<title>Space Pilot Game!</title>
</head>
<body>
	<style type="text/css">
		#space_background {
			background-image: url("space_background.jpg");
			width: 900px;
			height: 700px;
		}
		.player {
			position: absolute;
			background-image: url("player_kestrel.png");
			width: 70px;
			height: 75px;
		}
		.enemy {
			position: absolute;
			background-image: url("enemy_hurricane.png");
			width: 70px;
			height: 75px;
		}

	</style>

	<div id="space_background">
		<div id="players"></div>
		<div id="enemies"></div>
	</div>

	<script type="text/javascript">
		var debug = false;

		// Player position dictionary
		var player = {
			left: 450,
			top: 620
		}

		var totalEnemies = 6;

		// Array of enemy positions
		var enemyLeft = 100;
		var enemyTop = 100;
		var enemies = [];
			// {left:350, top:200},
			// {left:450, top:250}
		function initiateEnemies() {
			// Fill enemies array
			for (var i = 0; i < totalEnemies; i++) {
				// stagger enemies up and down by 25px
				switch (enemyTop) {
					case 100:
						enemies[i] = {left: enemyLeft, top: enemyTop};
						enemyTop += 25;
						enemyLeft += 80;
						break;
					case 125:
						enemies[i] = {left: enemyLeft, top: enemyTop};
						enemyTop -= 25;
						enemyLeft += 80;
						break;
				}
			}
		}
		initiateEnemies()

		// Get values to define border
		var ocean_obj = document.getElementById("space_background");
		var ocean_style = window.getComputedStyle(ocean_obj);
		var gameHeight = parseInt(ocean_style.getPropertyValue("height")) - 75; // Set bottom boundary
		var gameWidth = parseInt(ocean_style.getPropertyValue("width")) - 60; // set right boundary

		function drawPlayer() {
			content = "<div class='player' style='left:"+player.left+"px; top:"+player.top+"px'></div>";
			document.getElementById("players").innerHTML = content;
		}
		drawPlayer();

		function drawEnemies() {
			content = "";
			for (var arr of enemies) {
				content += "<div class='enemy' style='left:"+arr.left+"px; top:"+arr.top+"px'></div>";
				if (debug) {
					console.log("Left:", arr);
					console.log("Top:", top);
				}
			}
			if (debug) {
				console.log("Content:", content);
			}
			document.getElementById("enemies").innerHTML = content;
		}
		drawEnemies()



		var gameLoop = setInterval(updateEnemies, 50);

		function updateEnemies() {
			// move enemies down a little at a time
			for (var arr of enemies) {
				if (arr.top < gameHeight) {
					arr.top++;
				}
				else {
					clearInterval(gameLoop);
				}
			}
			drawEnemies();
		}

		document.onkeydown = function(e) {
			if (debug) {
				console.log(e);
			}
	        switch (e.keyCode) {
	            case 37: 			// left
	            	if (debug) {
	            		console.log("left");
	            	}
	                if (player.left > 0) {
	                	if (debug) {
	                		console.log("left confirmed");
	                	}
	                    player.left -= 10;
	                }
	                break;
	            case 39: 			// right
	            	if (debug) {
	            		console.log('right');
	            	}
	                if (player.left < gameWidth) {
	                	if (debug) {
	                		console.log('right confirmed');
	                	}
	                    player.left += 10;
	                }
	                break;
	            case 38: 			// up
	            	if (debug) {
	            		console.log('up');
	            	}
	                if (player.top > ( gameHeight * (3/4) ) ) { // Utilizing bottom 1/4 of the area
	                	if (debug) {
	                		console.log('top confirmed');
	                	}
	                    player.top -= 10;
	                }
	                break;
	            case 40: 			// down
	            	if (debug) {
	            		console.log('down');
	            	}
	                if (player.top < gameHeight) {
	                	if (debug) {
	                		console.log('down confirmed');
	                	}
						player.top += 10;
	                }
	                break;
        	}
        	drawPlayer() 
		}

	</script>
</body>
</html>
